<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>RAW</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="stylesheets/core.css">
        <link rel="stylesheet" type="text/css" href="stylesheets/colors.css">
        <link rel="stylesheet" type="text/css" href="stylesheets/about.css">
        <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400&display=swap" rel="stylesheet">
    </head>
    <body>
        <pre id="app">
            Loading...
        </pre>
    </body>
    <script src="../dist/saves.min.js" charset="utf-8"></script>
    <script src="javascripts/utils/Theme.js"></script>
    <script src="javascripts/utils/Url.js"></script>
    <script type="text/javascript">
    const getTheme = () => JSON.parse(localStorage.getItem("saveBankData")).settings.theme
    let currentTheme = Theme.applyTheme(getTheme());
    window.addEventListener("storage", () => {
        if (currentTheme != getTheme()) {
            currentTheme = Theme.applyTheme(getTheme());
        }
    });

    const updateText = () => {
        const catIndex = Url.getParam(Url.CAT_IDX_PARAM);
        const saveIndex = Url.getParam(Url.SAVE_IDX_PARAM);
        try {
            save = Saves.saves[Number(catIndex)].saves[Number(saveIndex)];
            document.getElementById("app").textContent = save.data;
            document.title = save.name;
        } catch(e) {
            const parent = document.getElementById("app");
            parent.innerHTML = "";

            const el = document.createElement("span");
            el.classList.add("warning");
            el.innerHTML = "File not found.";
            parent.appendChild(el);
            document.title = "Error";
        }
    }
    updateText();
    window.addEventListener('locationchange', updateText);
    </script>
    <style type="text/css">
    pre {
    	white-space: pre-wrap;
    	word-wrap: break-word;
    }

    .warning {
        text-transform: uppercase;
        color: var(--warning);
    }
    </style>
</html>
